"use client"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Search } from "lucide-react"

interface EmojiPickerProps {
  value: string
  onChange: (emoji: string) => void
  inline?: boolean
}

const EMOJI_NAMES: Record<string, string> = {
  "üòÄ": "grinning face smile happy",
  "üòÉ": "grinning face smile happy joy",
  "üòÑ": "grinning face smile happy joy laugh",
  "üòÅ": "beaming face smile happy grin",
  "üòÜ": "laughing face smile happy lol",
  "üòÖ": "sweat smile nervous laugh",
  "üòÇ": "joy tears laugh crying funny lol",
  "ü§£": "rolling laugh floor funny lol rofl",
  "üòä": "smile blush happy pleased",
  "üòá": "angel halo innocent smile",
  "üôÇ": "smile slight happy",
  "üôÉ": "upside down smile sarcastic",
  "üòâ": "wink flirt smile",
  "üòå": "relieved smile peaceful calm",
  "üòç": "heart eyes love adore",
  "ü•∞": "smiling hearts love adore",
  "üòò": "kiss love heart",
  "üòó": "kiss smile",
  "üòô": "kiss smile",
  "üòö": "kiss smile closed eyes",
  "üòã": "yum delicious food tasty",
  "üòõ": "tongue out playful",
  "üòù": "tongue wink playful",
  "üòú": "tongue wink playful",
  "ü§™": "zany crazy wild silly",
  "ü§®": "raised eyebrow skeptical suspicious",
  "üßê": "monocle thinking curious",
  "ü§ì": "nerd glasses geek smart",
  "üòé": "cool sunglasses awesome",
  "ü§©": "star struck amazed wow",
  "ü•≥": "party celebrate birthday",
  "üòè": "smirk sly confident",
  "üòí": "unamused annoyed bored",
  "üòû": "disappointed sad unhappy",
  "üòî": "pensive sad thoughtful",
  "üòü": "worried anxious concerned",
  "üòï": "confused puzzled uncertain",
  "üôÅ": "frown sad unhappy",
  "‚òπÔ∏è": "frown sad unhappy",
  "üò£": "persevere struggle difficult",
  "üòñ": "confounded frustrated upset",
  "üò´": "tired exhausted weary",
  "üò©": "weary tired exhausted",
  "ü•∫": "pleading puppy eyes sad",
  "üò¢": "cry sad tears",
  "üò≠": "crying tears sob sad",
  "üò§": "triumph proud steam",
  "üò†": "angry mad upset",
  "üò°": "rage angry furious mad",
  "ü§¨": "cursing swearing angry symbols",
  "ü§Ø": "mind blown exploding shocked",
  "üò≥": "flushed embarrassed surprised",
  "ü•µ": "hot sweat heat",
  "ü•∂": "cold freezing ice",
  "üò±": "scream fear scared shocked",
  "üò®": "fearful scared afraid",
  "üò∞": "anxious nervous worried sweat",
  "üò•": "sad sweat disappointed",
  "üòì": "downcast sweat tired",
  "ü§ó": "hugging hug embrace",
  "ü§î": "thinking hmm consider",
  "ü§≠": "hand over mouth oops giggle",
  "ü§´": "shush quiet silence",
  "ü§•": "lying pinocchio nose",
  "üë∂": "baby infant child",
  "üßí": "child kid young",
  "üë¶": "boy child kid",
  "üëß": "girl child kid",
  "üßë": "person adult human",
  "üë±": "person blonde hair",
  "üë®": "man male adult",
  "üßî": "man beard facial hair",
  "üë©": "woman female adult",
  "üßì": "older person elderly senior",
  "üë¥": "old man elderly grandfather",
  "üëµ": "old woman elderly grandmother",
  "üíÉ": "woman dancing dance party celebration",
  "üï∫": "man dancing dance party celebration",
  "ü§ñ": "robot machine ai artificial intelligence",
  "üë®‚Äç‚öïÔ∏è": "man doctor health medical physician",
  "üë©‚Äç‚öïÔ∏è": "woman doctor health medical physician",
  "üßë‚Äç‚öïÔ∏è": "person doctor health medical physician",
  "üë®‚Äçüéì": "man student graduate education",
  "üë©‚Äçüéì": "woman student graduate education",
  "üßë‚Äçüéì": "person student graduate education",
  "üë®‚Äçüè´": "man teacher professor education instructor",
  "üë©‚Äçüè´": "woman teacher professor education instructor",
  "üßë‚Äçüè´": "person teacher professor education instructor",
  "üë®‚Äç‚öñÔ∏è": "man judge law court justice",
  "üë©‚Äç‚öñÔ∏è": "woman judge law court justice",
  "üßë‚Äç‚öñÔ∏è": "person judge law court justice",
  "üë®‚Äçüåæ": "man farmer agriculture farming",
  "üë©‚Äçüåæ": "woman farmer agriculture farming",
  "üßë‚Äçüåæ": "person farmer agriculture farming",
  "üë®‚Äçüç≥": "man cook chef cooking kitchen",
  "üë©‚Äçüç≥": "woman cook chef cooking kitchen",
  "üßë‚Äçüç≥": "person cook chef cooking kitchen",
  "üë®‚Äçüîß": "man mechanic repair technician",
  "üë©‚Äçüîß": "woman mechanic repair technician",
  "üßë‚Äçüîß": "person mechanic repair technician",
  "üë®‚Äçüè≠": "man factory worker industrial",
  "üë©‚Äçüè≠": "woman factory worker industrial",
  "üßë‚Äçüè≠": "person factory worker industrial",
  "üë®‚Äçüíº": "man office worker business professional",
  "üë©‚Äçüíº": "woman office worker business professional",
  "üßë‚Äçüíº": "person office worker business professional",
  "üë®‚Äçüî¨": "man scientist research lab",
  "üë©‚Äçüî¨": "woman scientist research lab",
  "üßë‚Äçüî¨": "person scientist research lab",
  "üë®‚Äçüíª": "man technologist programmer developer coder",
  "üë©‚Äçüíª": "woman technologist programmer developer coder",
  "üßë‚Äçüíª": "person technologist programmer developer coder",
  "üë®‚Äçüé§": "man singer musician performer artist",
  "üë©‚Äçüé§": "woman singer musician performer artist",
  "üßë‚Äçüé§": "person singer musician performer artist",
  "üë®‚Äçüé®": "man artist painter creative",
  "üë©‚Äçüé®": "woman artist painter creative",
  "üßë‚Äçüé®": "person artist painter creative",
  "üë®‚Äç‚úàÔ∏è": "man pilot aviation airplane",
  "üë©‚Äç‚úàÔ∏è": "woman pilot aviation airplane",
  "üßë‚Äç‚úàÔ∏è": "person pilot aviation airplane",
  "üë®‚ÄçüöÄ": "man astronaut space rocket",
  "üë©‚ÄçüöÄ": "woman astronaut space rocket",
  "üßë‚ÄçüöÄ": "person astronaut space rocket",
  "üë®‚Äçüöí": "man firefighter fire emergency",
  "üë©‚Äçüöí": "woman firefighter fire emergency",
  "üßë‚Äçüöí": "person firefighter fire emergency",
  "üëÆ‚Äç‚ôÇÔ∏è": "man police officer cop law enforcement",
  "üëÆ‚Äç‚ôÄÔ∏è": "woman police officer cop law enforcement",
  "üë∑‚Äç‚ôÇÔ∏è": "man construction worker builder",
  "üë∑‚Äç‚ôÄÔ∏è": "woman construction worker builder",
  "üïµÔ∏è‚Äç‚ôÇÔ∏è": "man detective spy investigator",
  "üïµÔ∏è‚Äç‚ôÄÔ∏è": "woman detective spy investigator",
  "üíÇ‚Äç‚ôÇÔ∏è": "man guard soldier",
  "üíÇ‚Äç‚ôÄÔ∏è": "woman guard soldier",
  "üßë‚ÄçüéÑ": "person christmas santa",
  "üê∂": "dog puppy pet animal",
  "üê±": "cat kitten pet animal",
  "üê≠": "mouse rat animal",
  "üêπ": "hamster pet animal",
  "üê∞": "rabbit bunny animal",
  "ü¶ä": "fox animal",
  "üêª": "bear animal",
  "üêº": "panda bear animal",
  "üê®": "koala bear animal",
  "üêØ": "tiger animal",
  "ü¶Å": "lion animal king",
  "üêÆ": "cow animal farm",
  "üê∑": "pig animal farm",
  "üêΩ": "pig nose snout",
  "üê∏": "frog animal",
  "üêµ": "monkey animal",
  "üôà": "see no evil monkey",
  "üôâ": "hear no evil monkey",
  "üôä": "speak no evil monkey",
  "üêí": "monkey animal",
  "üêî": "chicken rooster bird farm",
  "üêß": "penguin bird animal",
  "üê¶": "bird animal",
  "üê§": "baby chick bird",
  "üê£": "hatching chick bird egg",
  "üê•": "baby chick bird",
  "ü¶Ü": "duck bird animal",
  "ü¶Ö": "eagle bird animal",
  "ü¶â": "owl bird animal night",
  "ü¶á": "bat animal night",
  "üê∫": "wolf animal",
  "üêó": "boar pig animal",
  "üê¥": "horse animal",
  "ü¶Ñ": "unicorn horse magical",
  "üêù": "bee insect honey",
  "üêõ": "bug caterpillar insect",
  "ü¶ã": "butterfly insect",
  "üêå": "snail slow animal",
  "üêû": "ladybug insect",
  "üêú": "ant insect",
  "üçé": "apple fruit red food",
  "üçê": "pear fruit food",
  "üçä": "orange fruit food citrus",
  "üçã": "lemon fruit food citrus sour",
  "üçå": "banana fruit food yellow",
  "üçâ": "watermelon fruit food summer",
  "üçá": "grapes fruit food purple",
  "üçì": "strawberry fruit food red berry",
  "üçà": "melon fruit food",
  "üçí": "cherries fruit food red",
  "üçë": "peach fruit food",
  "ü•≠": "mango fruit food tropical",
  "üçç": "pineapple fruit food tropical",
  "ü••": "coconut fruit food tropical",
  "ü•ù": "kiwi fruit food green",
  "üçÖ": "tomato vegetable food red",
  "üçÜ": "eggplant vegetable food purple",
  "ü•ë": "avocado fruit food green",
  "ü•¶": "broccoli vegetable food green",
  "ü•í": "cucumber vegetable food green",
  "üå∂Ô∏è": "pepper hot spicy food",
  "üåΩ": "corn vegetable food yellow",
  "ü•ï": "carrot vegetable food orange",
  "ü•î": "potato vegetable food",
  "üç†": "sweet potato vegetable food",
  "ü•ê": "croissant bread food pastry",
  "ü•ñ": "baguette bread food french",
  "üçû": "bread food loaf",
  "üßÄ": "cheese food dairy",
  "ü•ö": "egg food breakfast",
  "üç≥": "cooking egg food breakfast",
  "ü•û": "pancakes food breakfast",
  "ü•ì": "bacon food breakfast meat",
  "ü•©": "meat steak food",
  "üçó": "chicken leg food meat",
  "üçñ": "meat bone food",
  "üå≠": "hot dog food",
  "‚öΩ": "soccer ball football sport",
  "üèÄ": "basketball sport ball",
  "üèà": "football sport ball american",
  "‚öæ": "baseball sport ball",
  "üéæ": "tennis sport ball",
  "üèê": "volleyball sport ball",
  "üèâ": "rugby sport ball",
  "üé±": "pool billiards eight ball",
  "üèì": "ping pong table tennis sport",
  "üè∏": "badminton sport",
  "üèí": "hockey sport ice",
  "üèë": "field hockey sport",
  "üèè": "cricket sport",
  "üèπ": "archery bow arrow sport",
  "üé£": "fishing sport hobby",
  "ü•ä": "boxing glove sport fight",
  "ü•ã": "martial arts karate judo sport",
  "üõπ": "skateboard sport",
  "‚õ∏Ô∏è": "ice skate sport winter",
  "üéø": "ski sport winter snow",
  "üèÇ": "snowboard sport winter",
  "üèãÔ∏è": "weightlifting gym sport exercise",
  "ü§∏": "gymnastics sport exercise",
  "üßò": "yoga meditation exercise",
  "üèÑ": "surfing sport water",
  "üèä": "swimming sport water",
  "üöó": "car vehicle automobile",
  "üöï": "taxi cab vehicle",
  "üöô": "suv vehicle car",
  "üöå": "bus vehicle",
  "üöé": "trolleybus vehicle",
  "üèéÔ∏è": "race car vehicle fast",
  "üöì": "police car vehicle cop",
  "üöë": "ambulance vehicle emergency",
  "üöí": "fire truck vehicle emergency",
  "üöê": "minibus vehicle van",
  "üöö": "truck vehicle delivery",
  "üöõ": "semi truck vehicle",
  "üöú": "tractor vehicle farm",
  "üèçÔ∏è": "motorcycle vehicle bike",
  "üõµ": "scooter vehicle",
  "üö≤": "bicycle bike vehicle",
  "üõ¥": "scooter kick vehicle",
  "üöÅ": "helicopter vehicle aircraft",
  "‚úàÔ∏è": "airplane aircraft vehicle plane",
  "üõ©Ô∏è": "small airplane aircraft vehicle",
  "‚õµ": "sailboat boat ship water",
  "üö§": "speedboat boat ship water fast",
  "üõ•Ô∏è": "motor boat ship water",
  "üö¢": "ship boat water cruise",
  "‚öì": "anchor ship boat water",
  "üöß": "construction warning barrier hazard",
  "üö¶": "traffic light signal",
  "üó∫Ô∏è": "map world travel",
  "üóΩ": "statue liberty new york",
  "üóº": "tokyo tower japan",
  "üè∞": "castle building fortress",
  "üèØ": "japanese castle building",
  "üé°": "ferris wheel amusement park",
  "üé¢": "roller coaster amusement park",
  "üé†": "carousel horse amusement park",
  "‚åö": "watch time clock",
  "üì±": "phone mobile smartphone",
  "üíª": "laptop computer",
  "‚å®Ô∏è": "keyboard computer",
  "üñ•Ô∏è": "desktop computer",
  "üñ®Ô∏è": "printer computer storage",
  "üñ±Ô∏è": "mouse computer",
  "üíΩ": "disk computer storage",
  "üíæ": "floppy disk computer storage",
  "üíø": "cd disk computer",
  "üìÄ": "dvd disk computer",
  "üì∑": "camera photo picture",
  "üì∏": "camera flash photo picture",
  "üìπ": "video camera",
  "üé•": "movie camera film",
  "üìû": "phone telephone",
  "‚òéÔ∏è": "telephone phone",
  "üì∫": "television tv",
  "üìª": "radio",
  "üéôÔ∏è": "microphone mic",
  "‚è∞": "alarm clock time",
  "‚åõ": "hourglass time sand",
  "‚è≥": "hourglass time sand flowing",
  "üí°": "light bulb idea",
  "üî¶": "flashlight torch light",
  "üïØÔ∏è": "candle light fire",
  "üí∏": "money flying cash dollar",
  "üñºÔ∏è": "picture frame painting art",
  "üé®": "art palette painting artist",
  "üñåÔ∏è": "paintbrush brush art painting",
  "üñçÔ∏è": "crayon art drawing",
  "üé≠": "performing arts theater mask drama",
  "üóø": "moai statue easter island",
  "‚úÖ": "check mark button yes done complete",
  "‚òëÔ∏è": "check box yes done complete",
  "‚úîÔ∏è": "check mark yes done complete",
  "‚ùå": "cross mark x no cancel delete",
  "‚ùé": "cross mark button x no cancel",
  "‚úñÔ∏è": "multiply x cross",
  "‚ö†Ô∏è": "warning caution alert hazard",
  "‚ò¢Ô∏è": "radioactive hazard danger nuclear",
  "‚ò£Ô∏è": "biohazard danger hazard",
  "‚õî": "no entry prohibited forbidden",
  "üö´": "prohibited forbidden no ban",
  "üö∑": "no pedestrians forbidden",
  "üöØ": "no littering forbidden",
  "üö±": "non potable water forbidden",
  "üö≥": "no bicycles forbidden",
  "üö≠": "no smoking forbidden",
  "üîû": "no one under eighteen adult",
  "‚ö°": "high voltage lightning electricity danger",
  "üî•": "fire flame hot danger",
  "üí•": "collision explosion boom bang",
  "‚≠ê": "star favorite important",
  "‚ú®": "sparkles stars magic",
  "üí´": "dizzy star spinning",
  "üíß": "droplet water liquid",
  "üí¶": "sweat droplets water splash",
  "‚ùÑÔ∏è": "snowflake cold winter ice",
  "üåü": "glowing star shining",
  "‚≠ï": "hollow red circle o",
  "‚ùì": "question mark help unknown",
  "‚ùî": "white question mark help",
  "‚ùó": "exclamation mark important alert",
  "‚ùï": "white exclamation mark alert",
  "üî¥": "red circle dot",
  "üü†": "orange circle dot",
  "üü°": "yellow circle dot",
  "üü¢": "green circle dot",
  "üîµ": "blue circle dot",
  "üü£": "purple circle dot",
  "üü§": "brown circle dot",
  "‚ö´": "black circle dot",
  "‚ö™": "white circle dot",
  "üü•": "red square",
  "üüß": "orange square",
  "üü®": "yellow square",
  "üü©": "green square",
  "üü¶": "blue square",
  "üü™": "purple square",
  "üü´": "brown square",
  "‚¨õ": "black square",
  "‚¨ú": "white square",
  "‚ù§Ô∏è": "heart love red",
  "üß°": "orange heart love",
  "üíõ": "yellow heart love",
  "üíö": "green heart love",
  "üíô": "blue heart love",
  "üíú": "purple heart love",
  "üñ§": "black heart love",
  "ü§ç": "white heart love",
  "ü§é": "brown heart love",
  "üíî": "broken heart sad love",
  "‚ù£Ô∏è": "heart exclamation love",
  "üíï": "two hearts love",
  "üíû": "revolving hearts love",
  "üíì": "beating heart love",
  "üíó": "growing heart love",
  "üíñ": "sparkling heart love",
  "üíò": "heart arrow love cupid",
  "üíù": "heart box love gift",
  "‚úùÔ∏è": "cross christian religion",
  "‚ò™Ô∏è": "star crescent islam religion",
  "üïâÔ∏è": "om hindu religion",
  "‚ú°Ô∏è": "star david jewish religion",
  "‚òØÔ∏è": "yin yang balance",
  "‚ôà": "aries zodiac astrology",
  "‚ôâ": "taurus zodiac astrology",
  "‚ôä": "gemini zodiac astrology",
  "‚ôã": "cancer zodiac astrology",
  "‚ôå": "leo zodiac astrology",
  "‚ôç": "virgo zodiac astrology",
  "‚ôé": "libra zodiac astrology",
  "‚ôè": "scorpio zodiac astrology",
  "‚ôê": "sagittarius zodiac astrology",
  "‚ôë": "capricorn zodiac astrology",
  "‚ôí": "aquarius zodiac astrology",
  "‚ôì": "pisces zodiac astrology",
}

const EMOJI_CATEGORIES = {
  Smileys: [
    "üòÄ",
    "üòÉ",
    "üòÑ",
    "üòÅ",
    "üòÜ",
    "üòÖ",
    "üòÇ",
    "ü§£",
    "üòä",
    "üòá",
    "üôÇ",
    "üôÉ",
    "üòâ",
    "üòå",
    "üòç",
    "ü•∞",
    "üòò",
    "üòó",
    "üòô",
    "üòö",
    "üòã",
    "üòõ",
    "üòù",
    "üòú",
    "ü§™",
    "ü§®",
    "üßê",
    "ü§ì",
    "üòé",
    "ü§©",
    "ü•≥",
    "üòè",
    "üòí",
    "üòû",
    "üòî",
    "üòü",
    "üòï",
    "üôÅ",
    "‚òπÔ∏è",
    "üò£",
    "üòñ",
    "üò´",
    "üò©",
    "ü•∫",
    "üò¢",
    "üò≠",
    "üò§",
    "üò†",
    "üò°",
    "ü§¨",
    "ü§Ø",
    "üò≥",
    "ü•µ",
    "ü•∂",
    "üò±",
    "üò®",
    "üò∞",
    "üò•",
    "üòì",
    "ü§ó",
    "ü§î",
    "ü§≠",
    "ü§´",
    "ü§•",
  ],
  People: [
    "üë∂",
    "üßí",
    "üë¶",
    "üëß",
    "üßë",
    "üë±",
    "üë®",
    "üßî",
    "üë©",
    "üßì",
    "üë¥",
    "üëµ",
    "üôç",
    "üôé",
    "üôÖ",
    "üôÜ",
    "üíÅ",
    "üôã",
    "üßè",
    "üôá",
    "ü§¶",
    "ü§∑",
    "üíÉ",
    "üï∫",
    "ü§ñ",
    "üë®‚Äç‚öïÔ∏è",
    "üë©‚Äç‚öïÔ∏è",
    "üßë‚Äç‚öïÔ∏è",
    "üë®‚Äçüéì",
    "üë©‚Äçüéì",
    "üßë‚Äçüéì",
    "üë®‚Äçüè´",
    "üë©‚Äçüè´",
    "üßë‚Äçüè´",
    "üë®‚Äç‚öñÔ∏è",
    "üë©‚Äç‚öñÔ∏è",
    "üßë‚Äç‚öñÔ∏è",
    "üë®‚Äçüåæ",
    "üë©‚Äçüåæ",
    "üßë‚Äçüåæ",
    "üë®‚Äçüç≥",
    "üë©‚Äçüç≥",
    "üßë‚Äçüç≥",
    "üë®‚Äçüîß",
    "üë©‚Äçüîß",
    "üßë‚Äçüîß",
    "üë®‚Äçüè≠",
    "üë©‚Äçüè≠",
    "üßë‚Äçüè≠",
    "üë®‚Äçüíº",
    "üë©‚Äçüíº",
    "üßë‚Äçüíº",
    "üë®‚Äçüî¨",
    "üë©‚Äçüî¨",
    "üßë‚Äçüî¨",
    "üë®‚Äçüíª",
    "üë©‚Äçüíª",
    "üßë‚Äçüíª",
    "üë®‚Äçüé§",
    "üë©‚Äçüé§",
    "üßë‚Äçüé§",
    "üë®‚Äçüé®",
    "üë©‚Äçüé®",
    "üßë‚Äçüé®",
    "üë®‚Äç‚úàÔ∏è",
    "üë©‚Äç‚úàÔ∏è",
    "üßë‚Äç‚úàÔ∏è",
    "üë®‚ÄçüöÄ",
    "üë©‚ÄçüöÄ",
    "üßë‚ÄçüöÄ",
    "üë®‚Äçüöí",
    "üë©‚Äçüöí",
    "üßë‚Äçüöí",
    "üëÆ",
    "üïµÔ∏è",
    "üíÇ",
    "üë∑",
    "ü§¥",
    "üë∏",
    "üë≥",
    "üë≤",
    "üßï",
    "ü§µ",
    "üë∞",
    "ü§∞",
    "ü§±",
    "üëº",
    "üéÖ",
    "ü§∂",
    "ü¶∏",
    "ü¶π",
    "üßô",
    "üßö",
    "üßõ",
    "üßú",
    "üßù",
    "üßû",
    "üßü",
    "üíÜ",
  ],
  Animals: [
    "üê∂",
    "üê±",
    "üê≠",
    "üêπ",
    "üê∞",
    "ü¶ä",
    "üêª",
    "üêº",
    "üê®",
    "üêØ",
    "ü¶Å",
    "üêÆ",
    "üê∑",
    "üêΩ",
    "üê∏",
    "üêµ",
    "üôà",
    "üôâ",
    "üôä",
    "üêí",
    "üêî",
    "üêß",
    "üê¶",
    "üê§",
    "üê£",
    "üê•",
    "ü¶Ü",
    "ü¶Ö",
    "ü¶â",
    "ü¶á",
    "üê∫",
    "üêó",
    "üê¥",
    "ü¶Ñ",
    "üêù",
    "üêõ",
    "ü¶ã",
    "üêå",
    "üêû",
    "üêú",
    "ü¶ü",
    "ü¶ó",
    "üï∑Ô∏è",
    "ü¶Ç",
    "üê¢",
    "üêç",
    "ü¶é",
    "ü¶ñ",
  ],
  Food: [
    "üçé",
    "üçê",
    "üçä",
    "üçã",
    "üçå",
    "üçâ",
    "üçá",
    "üçì",
    "ü´ê",
    "üçà",
    "üçí",
    "üçë",
    "ü•≠",
    "üçç",
    "ü••",
    "ü•ù",
    "üçÖ",
    "üçÜ",
    "ü•ë",
    "ü•¶",
    "ü•¨",
    "ü•í",
    "üå∂Ô∏è",
    "ü´ë",
    "üåΩ",
    "ü•ï",
    "ü´í",
    "üßÑ",
    "üßÖ",
    "ü•î",
    "üç†",
    "ü•ê",
    "ü•ñ",
    "üçû",
    "ü•®",
    "ü•Ø",
    "üßÄ",
    "ü•ö",
    "üç≥",
    "üßà",
    "ü•û",
    "üßá",
    "ü•ì",
    "ü•©",
    "üçó",
    "üçñ",
    "ü¶¥",
    "üå≠",
  ],
  Activities: [
    "‚öΩ",
    "üèÄ",
    "üèà",
    "‚öæ",
    "ü•é",
    "üéæ",
    "üèê",
    "üèâ",
    "ü•è",
    "üé±",
    "ü™Ä",
    "üèì",
    "üè∏",
    "üèí",
    "üèë",
    "ü•ç",
    "üèè",
    "ü™É",
    "ü•Ö",
    "‚õ≥",
    "ü™Å",
    "üèπ",
    "üé£",
    "ü§ø",
    "ü•ä",
    "ü•ã",
    "üéΩ",
    "üõπ",
    "üõº",
    "‚õ∏Ô∏è",
    "ü•å",
    "üéø",
    "‚õ∑Ô∏è",
    "üèÇ",
    "ü™Ç",
    "üèãÔ∏è",
    "ü§º",
    "ü§∏",
    "‚õπÔ∏è",
    "ü§∫",
    "üèåÔ∏è",
    "üèá",
    "üßò",
    "üèÑ",
    "üèä",
    "ü§Ω",
    "üö£",
    "üßó",
    "üé®",
    "üñåÔ∏è",
    "üñçÔ∏è",
    "üé≠",
    "üñºÔ∏è",
  ],
  Travel: [
    "üöó",
    "üöï",
    "üöô",
    "üöå",
    "üöé",
    "üèéÔ∏è",
    "üöì",
    "üöë",
    "üöí",
    "üöê",
    "üõª",
    "üöö",
    "üöõ",
    "üöú",
    "üèçÔ∏è",
    "üõµ",
    "üö≤",
    "üõ¥",
    "üõπ",
    "üõº",
    "üöÅ",
    "üõ∏",
    "‚úàÔ∏è",
    "üõ©Ô∏è",
    "ü™Ç",
    "‚õµ",
    "üö§",
    "üõ•Ô∏è",
    "üõ≥Ô∏è",
    "‚õ¥Ô∏è",
    "üö¢",
    "‚öì",
    "‚õΩ",
    "üöß",
    "üö¶",
    "üö•",
    "üó∫Ô∏è",
    "üóø",
    "üóΩ",
    "üóº",
    "üè∞",
    "üèØ",
    "üèüÔ∏è",
    "üé°",
    "üé¢",
    "üé†",
    "‚õ≤",
    "‚õ±Ô∏è",
  ],
  Objects: [
    "‚åö",
    "üì±",
    "üì≤",
    "üíª",
    "‚å®Ô∏è",
    "üñ•Ô∏è",
    "üñ®Ô∏è",
    "üñ±Ô∏è",
    "üñ≤Ô∏è",
    "üïπÔ∏è",
    "üóúÔ∏è",
    "üíΩ",
    "üíæ",
    "üíø",
    "üìÄ",
    "üìº",
    "üì∑",
    "üì∏",
    "üìπ",
    "üé•",
    "üìΩÔ∏è",
    "üéûÔ∏è",
    "üìû",
    "‚òéÔ∏è",
    "üìü",
    "üì†",
    "üì∫",
    "üìª",
    "üéôÔ∏è",
    "üéöÔ∏è",
    "üéõÔ∏è",
    "üß≠",
    "‚è±Ô∏è",
    "‚è≤Ô∏è",
    "‚è∞",
    "üï∞Ô∏è",
    "‚åõ",
    "‚è≥",
    "üì°",
    "üîã",
    "üîå",
    "üí°",
    "üî¶",
    "üïØÔ∏è",
    "ü™î",
    "üßØ",
    "üõ¢Ô∏è",
    "üí∏",
  ],
  Symbols: [
    "‚úÖ",
    "‚òëÔ∏è",
    "‚úîÔ∏è",
    "‚ùå",
    "‚ùé",
    "‚úñÔ∏è",
    "‚ö†Ô∏è",
    "‚ò¢Ô∏è",
    "‚ò£Ô∏è",
    "‚õî",
    "üö´",
    "üö∑",
    "üöØ",
    "üö±",
    "üö≥",
    "üö≠",
    "üîû",
    "‚ö°",
    "üî•",
    "üí•",
    "‚≠ê",
    "‚ú®",
    "üí´",
    "üíß",
    "üí¶",
    "‚ùÑÔ∏è",
    "üåü",
    "‚≠ï",
    "‚ùì",
    "‚ùî",
    "‚ùó",
    "‚ùï",
    "üî¥",
    "üü†",
    "üü°",
    "üü¢",
    "üîµ",
    "üü£",
    "üü§",
    "‚ö´",
    "‚ö™",
    "üü•",
    "üüß",
    "üü®",
    "üü©",
    "üü¶",
    "üü™",
    "üü´",
    "‚¨õ",
    "‚¨ú",
    "‚ù§Ô∏è",
    "üß°",
    "üíõ",
    "üíö",
    "üíô",
    "üíú",
    "üñ§",
    "ü§ç",
    "ü§é",
    "üíî",
    "‚ù£Ô∏è",
    "üíï",
    "üíû",
    "üíì",
    "üíó",
    "üíñ",
    "üíò",
    "üíù",
    "üíü",
    "‚òÆÔ∏è",
    "‚úùÔ∏è",
    "‚ò™Ô∏è",
    "üïâÔ∏è",
    "‚ò∏Ô∏è",
    "‚ú°Ô∏è",
    "üîØ",
    "üïé",
    "‚òØÔ∏è",
    "‚ò¶Ô∏è",
    "üõê",
    "‚õé",
    "‚ôà",
    "‚ôâ",
    "‚ôä",
    "‚ôã",
    "‚ôå",
    "‚ôç",
    "‚ôé",
    "‚ôè",
    "‚ôê",
    "‚ôë",
    "‚ôí",
    "‚ôì",
    "üÜî",
    "‚öõÔ∏è",
    "üâë",
    "üì¥",
    "üì≥",
  ],
}

export function EmojiPicker({ value, onChange, inline = false }: EmojiPickerProps) {
  const [searchTerm, setSearchTerm] = useState("")
  const [activeTab, setActiveTab] = useState("Smileys")
  const [open, setOpen] = useState(false)

  const allEmojis = Object.values(EMOJI_CATEGORIES).flat()

  const filteredEmojis = searchTerm
    ? allEmojis.filter((emoji) => {
        const searchLower = searchTerm.toLowerCase()
        const emojiName = EMOJI_NAMES[emoji] || ""
        return emoji.includes(searchTerm) || emojiName.toLowerCase().includes(searchLower)
      })
    : EMOJI_CATEGORIES[activeTab as keyof typeof EMOJI_CATEGORIES] || []

  const handleEmojiSelect = (emoji: string) => {
    onChange(emoji)
    setOpen(false)
  }

  const handleOpenChange = (newOpen: boolean) => {
    setOpen(newOpen)
  }

  const handleTriggerClick = () => {
    // Trigger click handler
  }

  if (inline) {
    return (
      <div className="space-y-2 w-full">
        <div className="flex items-center gap-2">
          <Button variant="ghost" size="sm" className="w-10 h-10 p-0 text-xl cursor-pointer hover:bg-muted border">
            {value || "üòÄ"}
          </Button>
          <div className="grid grid-cols-6 gap-1 flex-1">
            {EMOJI_CATEGORIES.Smileys.slice(0, 6).map((emoji) => (
              <Button
                key={emoji}
                variant="ghost"
                size="sm"
                className="w-8 h-8 p-0 text-lg hover:bg-muted cursor-pointer"
                onClick={() => handleEmojiSelect(emoji)}
              >
                {emoji}
              </Button>
            ))}
          </div>
        </div>
        <div className="grid grid-cols-8 gap-1">
          {EMOJI_CATEGORIES.Objects.slice(0, 16).map((emoji) => (
            <Button
              key={emoji}
              variant="ghost"
              size="sm"
              className="w-8 h-8 p-0 text-lg hover:bg-muted cursor-pointer"
              onClick={() => handleEmojiSelect(emoji)}
            >
              {emoji}
            </Button>
          ))}
        </div>
      </div>
    )
  }

  return (
    <Popover open={open} onOpenChange={handleOpenChange}>
      <PopoverTrigger
        className="w-8 h-8 p-0 text-lg cursor-pointer hover:bg-muted inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground"
        onClick={handleTriggerClick}
      >
        {value || "üòÄ"}
      </PopoverTrigger>
      <PopoverContent
        className="w-96 p-3 z-50"
        side="bottom"
        align="start"
        sideOffset={8}
        collisionPadding={10}
        avoidCollisions={true}
        sticky="always"
        onCloseAutoFocus={(e) => e.preventDefault()}
      >
        <div className="space-y-3">
          <div className="relative">
            <Search className="w-4 h-4 absolute left-2 top-1/2 transform -translate-y-1/2 text-muted-foreground" />
            <Input
              placeholder="Search emojis..."
              className="pl-8 h-8"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>

          {!searchTerm ? (
            <Tabs value={activeTab} onValueChange={setActiveTab}>
              <TabsList className="grid w-full grid-cols-4">
                <TabsTrigger value="Smileys" className="text-xs cursor-pointer">
                  üòÄ
                </TabsTrigger>
                <TabsTrigger value="People" className="text-xs cursor-pointer">
                  üë§
                </TabsTrigger>
                <TabsTrigger value="Animals" className="text-xs cursor-pointer">
                  üê∂
                </TabsTrigger>
                <TabsTrigger value="Food" className="text-xs cursor-pointer">
                  üçé
                </TabsTrigger>
              </TabsList>
              <TabsList className="grid w-full grid-cols-4 mt-1">
                <TabsTrigger value="Activities" className="text-xs cursor-pointer">
                  ‚öΩ
                </TabsTrigger>
                <TabsTrigger value="Travel" className="text-xs cursor-pointer">
                  üöó
                </TabsTrigger>
                <TabsTrigger value="Objects" className="text-xs cursor-pointer">
                  üíª
                </TabsTrigger>
                <TabsTrigger value="Symbols" className="text-xs cursor-pointer">
                  ‚ù§Ô∏è
                </TabsTrigger>
              </TabsList>

              {Object.entries(EMOJI_CATEGORIES).map(([category, emojis]) => (
                <TabsContent key={category} value={category} className="mt-2">
                  <div className="grid grid-cols-8 gap-1 max-h-48 overflow-y-auto">
                    {emojis.map((emoji) => (
                      <Button
                        key={emoji}
                        variant="ghost"
                        size="sm"
                        className="w-8 h-8 p-0 text-lg hover:bg-muted cursor-pointer"
                        onClick={() => handleEmojiSelect(emoji)}
                      >
                        {emoji}
                      </Button>
                    ))}
                  </div>
                </TabsContent>
              ))}
            </Tabs>
          ) : (
            <div className="grid grid-cols-8 gap-1 max-h-48 overflow-y-auto">
              {filteredEmojis.length > 0 ? (
                filteredEmojis.map((emoji) => (
                  <Button
                    key={emoji}
                    variant="ghost"
                    size="sm"
                    className="w-8 h-8 p-0 text-lg hover:bg-muted cursor-pointer"
                    onClick={() => handleEmojiSelect(emoji)}
                  >
                    {emoji}
                  </Button>
                ))
              ) : (
                <div className="col-span-8 text-center text-sm text-muted-foreground py-4">No emojis found</div>
              )}
            </div>
          )}
        </div>
      </PopoverContent>
    </Popover>
  )
}
