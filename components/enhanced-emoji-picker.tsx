"use client"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Popover, PopoverContent, PopoverTrigger } from "@/components/ui/popover"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Search } from "lucide-react"

interface EmojiPickerProps {
  value: string
  onChange: (emoji: string) => void
  inline?: boolean
}

const EMOJI_NAMES: Record<string, string> = {
  "üòÄ": "grinning face smile happy",
  "üòÉ": "grinning face smile happy joy",
  "üòÑ": "grinning face smile happy joy laugh",
  "üòÅ": "beaming face smile happy grin",
  "üòÜ": "laughing face smile happy lol",
  "üòÖ": "sweat smile nervous laugh",
  "üòÇ": "joy tears laugh crying funny lol",
  "ü§£": "rolling laugh floor funny lol rofl",
  "üòä": "smile blush happy pleased",
  "üòá": "angel halo innocent smile",
  "üôÇ": "smile slight happy",
  "üôÉ": "upside down smile sarcastic",
  "üòâ": "wink flirt smile",
  "üòå": "relieved smile peaceful calm",
  "üòç": "heart eyes love adore",
  "ü•∞": "smiling hearts love adore",
  "üòò": "kiss love heart",
  "üòó": "kiss smile",
  "üòô": "kiss smile",
  "üòö": "kiss smile closed eyes",
  "üòã": "yum delicious food tasty hungry",
  "üòõ": "tongue out playful",
  "üòù": "tongue wink playful",
  "üòú": "tongue wink playful",
  "ü§™": "zany crazy wild silly",
  "ü§®": "raised eyebrow skeptical suspicious",
  "üßê": "monocle thinking curious",
  "ü§ì": "nerd glasses geek smart",
  "üòé": "cool sunglasses awesome",
  "ü§©": "star struck amazed wow",
  "ü•≥": "party celebrate birthday",
  "üòè": "smirk sly confident",
  "üòí": "unamused annoyed bored",
  "üòû": "disappointed sad unhappy",
  "üòî": "pensive sad thoughtful",
  "üòü": "worried anxious concerned",
  "üòï": "confused puzzled uncertain",
  "üôÅ": "frown sad unhappy",
  "‚òπÔ∏è": "frown sad unhappy",
  "üò£": "persevere struggle difficult",
  "üòñ": "confounded frustrated upset",
  "üò´": "tired exhausted weary",
  "üò©": "weary tired exhausted",
  "ü•∫": "pleading puppy eyes sad",
  "üò¢": "cry sad tears",
  "üò≠": "crying tears sob sad",
  "üò§": "triumph proud steam",
  "üò†": "angry mad upset",
  "üò°": "rage angry furious mad",
  "ü§¨": "cursing swearing angry symbols",
  "ü§Ø": "mind blown exploding shocked",
  "üò≥": "flushed embarrassed surprised",
  "ü•µ": "hot sweat heat",
  "ü•∂": "cold freezing ice",
  "üò±": "scream fear scared shocked",
  "üò®": "fearful scared afraid",
  "üò∞": "anxious nervous worried sweat",
  "üò•": "sad sweat disappointed",
  "üòì": "downcast sweat tired",
  "ü§ó": "hugging hug embrace",
  "ü§î": "thinking hmm consider",
  "ü§≠": "hand over mouth oops giggle",
  "ü§´": "shush quiet silence",
  "ü§•": "lying pinocchio nose",
  "üëÄ": "eyes looking watching see vision",
  "üëÅÔ∏è": "eye looking watching see vision",
  "üëì": "glasses eyeglasses spectacles vision reading",
  "üï∂Ô∏è": "sunglasses cool shades dark glasses",
  "ü•Ω": "goggles safety swimming diving protection",
  "üë∂": "baby infant child",
  "üßí": "child kid young",
  "üë¶": "boy child kid",
  "üëß": "girl child kid",
  "üßë": "person adult human",
  "üë±": "person blonde hair",
  "üë®": "man male adult",
  "üßî": "man beard facial hair",
  "üë©": "woman female adult",
  "üßì": "older person elderly senior",
  "üë¥": "old man elderly grandfather",
  "üëµ": "old woman elderly grandmother",
  "üíÉ": "woman dancing dance party celebration",
  "üï∫": "man dancing dance party celebration",
  "ü§ñ": "robot machine ai artificial intelligence",
  "üë®‚Äç‚öïÔ∏è": "man doctor health medical physician",
  "üë©‚Äç‚öïÔ∏è": "woman doctor health medical physician",
  "üßë‚Äç‚öïÔ∏è": "person doctor health medical physician",
  "üë®‚Äçüéì": "man student graduate education",
  "üë©‚Äçüéì": "woman student graduate education",
  "üßë‚Äçüéì": "person student graduate education",
  "üë®‚Äçüè´": "man teacher professor education instructor",
  "üë©‚Äçüè´": "woman teacher professor education instructor",
  "üßë‚Äçüè´": "person teacher professor education instructor",
  "üë®‚Äç‚öñÔ∏è": "man judge law court justice",
  "üë©‚Äç‚öñÔ∏è": "woman judge law court justice",
  "üßë‚Äç‚öñÔ∏è": "person judge law court justice",
  "üë®‚Äçüåæ": "man farmer agriculture farming",
  "üë©‚Äçüåæ": "woman farmer agriculture farming",
  "üßë‚Äçüåæ": "person farmer agriculture farming",
  "üë®‚Äçüç≥": "man cook chef cooking kitchen",
  "üë©‚Äçüç≥": "woman cook chef cooking kitchen",
  "üßë‚Äçüç≥": "person cook chef cooking kitchen",
  "üë®‚Äçüîß": "man mechanic repair technician",
  "üë©‚Äçüîß": "woman mechanic repair technician",
  "üßë‚Äçüîß": "person mechanic repair technician",
  "üë®‚Äçüè≠": "man factory worker industrial",
  "üë©‚Äçüè≠": "woman factory worker industrial",
  "üßë‚Äçüè≠": "person factory worker industrial",
  "üë®‚Äçüíº": "man office worker business professional",
  "üë©‚Äçüíº": "woman office worker business professional",
  "üßë‚Äçüíº": "person office worker business professional",
  "üë®‚Äçüî¨": "man scientist research lab",
  "üë©‚Äçüî¨": "woman scientist research lab",
  "üßë‚Äçüî¨": "person scientist research lab",
  "üë®‚Äçüíª": "man technologist programmer developer coder",
  "üë©‚Äçüíª": "woman technologist programmer developer coder",
  "üßë‚Äçüíª": "person technologist programmer developer coder",
  "üë®‚Äçüé§": "man singer musician performer artist",
  "üë©‚Äçüé§": "woman singer musician performer artist",
  "üßë‚Äçüé§": "person singer musician performer artist",
  "üë®‚Äçüé®": "man artist painter creative",
  "üë©‚Äçüé®": "woman artist painter creative",
  "üßë‚Äçüé®": "person artist painter creative",
  "üë®‚Äç‚úàÔ∏è": "man pilot aviation airplane",
  "üë©‚Äç‚úàÔ∏è": "woman pilot aviation airplane",
  "üßë‚Äç‚úàÔ∏è": "person pilot aviation airplane",
  "üë®‚ÄçüöÄ": "man astronaut space rocket",
  "üë©‚ÄçüöÄ": "woman astronaut space rocket",
  "üßë‚ÄçüöÄ": "person astronaut space rocket",
  "üë®‚Äçüöí": "man firefighter fire emergency",
  "üë©‚Äçüöí": "woman firefighter fire emergency",
  "üßë‚Äçüöí": "person firefighter fire emergency",
  "üëÆ": "police officer cop law enforcement",
  "üïµÔ∏è": "detective spy investigator",
  "üíÇ": "guard soldier",
  "üë∑": "construction worker builder",
  "ü§¥": "prince royal",
  "üë∏": "princess royal",
  "üë≥": "person turban",
  "üë≤": "person skullcap",
  "üßï": "person headscarf",
  "ü§µ": "person tuxedo",
  "üë∞": "person veil bride",
  "ü§∞": "pregnant woman",
  "ü§±": "breast feeding",
  "üëº": "baby angel",
  "üéÖ": "santa claus christmas",
  "ü§∂": "mrs claus christmas",
  "ü¶∏": "superhero hero",
  "ü¶π": "supervillain villain",
  "üßô": "mage wizard",
  "üßö": "fairy magic",
  "üßõ": "vampire",
  "üßú": "merperson mermaid",
  "üßù": "elf",
  "üßû": "genie",
  "üßü": "zombie",
  "üíÜ": "person massage spa",
  "üê∂": "dog puppy pet animal",
  "üê±": "cat kitten pet animal",
  "üê≠": "mouse rat animal",
  "üêπ": "hamster pet animal",
  "üê∞": "rabbit bunny animal",
  "ü¶ä": "fox animal",
  "üêª": "bear animal",
  "üêº": "panda bear animal",
  "üê®": "koala bear animal",
  "üêØ": "tiger animal",
  "ü¶Å": "lion animal king",
  "üêÆ": "cow animal farm",
  "üê∑": "pig animal farm",
  "üêΩ": "pig nose snout",
  "üê∏": "frog animal",
  "üêµ": "monkey animal",
  "üôà": "see no evil monkey",
  "üôâ": "hear no evil monkey",
  "üôä": "speak no evil monkey",
  "üêí": "monkey animal",
  "üêî": "chicken rooster bird farm",
  "üêß": "penguin bird animal",
  "üê¶": "bird animal",
  "üê§": "baby chick bird",
  "üê£": "hatching chick bird egg",
  "üê•": "baby chick bird",
  "ü¶Ü": "duck bird animal",
  "ü¶Ö": "eagle bird animal",
  "ü¶â": "owl bird animal night",
  "ü¶á": "bat animal night",
  "üê∫": "wolf animal",
  "üêó": "boar pig animal",
  "üê¥": "horse animal",
  "ü¶Ñ": "unicorn horse magical",
  "üêù": "bee insect honey",
  "üêõ": "bug caterpillar insect",
  "ü¶ã": "butterfly insect",
  "üêå": "snail slow animal",
  "üêû": "ladybug insect",
  "üêú": "ant insect",
  "ü¶ü": "mosquito insect",
  "ü¶ó": "cricket insect",
  "üï∑Ô∏è": "spider insect",
  "ü¶Ç": "scorpion insect",
  "üê¢": "turtle animal",
  "üêç": "snake animal",
  "ü¶é": "lizard animal",
  "ü¶ñ": "dinosaur animal",
  "üçé": "apple fruit red food",
  "üçê": "pear fruit food",
  "üçä": "orange fruit food citrus",
  "üçã": "lemon fruit food citrus sour",
  "üçå": "banana fruit food yellow",
  "üçâ": "watermelon fruit food summer",
  "üçá": "grapes fruit food purple",
  "üçì": "strawberry fruit food red berry",
  "üçà": "melon fruit food",
  "üçí": "cherries fruit food red",
  "üçë": "peach fruit food",
  "ü•≠": "mango fruit food tropical",
  "üçç": "pineapple fruit food tropical",
  "ü••": "coconut fruit food tropical",
  "ü•ù": "kiwi fruit food green",
  "üçÖ": "tomato vegetable food red",
  "üçÜ": "eggplant vegetable food purple",
  "ü•ë": "avocado fruit food green",
  "ü•¶": "broccoli vegetable food green",
  "ü•í": "cucumber vegetable food green",
  "üå∂Ô∏è": "pepper hot spicy food",
  "üåΩ": "corn vegetable food yellow",
  "ü•ï": "carrot vegetable food orange",
  "ü•î": "potato vegetable food",
  "üç†": "sweet potato vegetable food",
  "ü•ê": "croissant bread food pastry",
  "ü•ñ": "baguette bread food french",
  "üçû": "bread food loaf",
  "üßÄ": "cheese food dairy",
  "ü•ö": "egg food breakfast",
  "üç≥": "cooking egg food breakfast",
  "ü•û": "pancakes food breakfast",
  "ü•ì": "bacon food breakfast meat",
  "ü•©": "meat steak food",
  "üçó": "chicken leg food meat",
  "üçñ": "meat bone food",
  "üå≠": "hot dog food",
  "‚öΩ": "soccer ball football sport",
  "üèÄ": "basketball sport ball",
  "üèà": "football sport ball american",
  "‚öæ": "baseball sport ball",
  "üéæ": "tennis sport ball",
  "üèê": "volleyball sport ball",
  "üèâ": "rugby sport ball",
  "üé±": "pool billiards eight ball",
  "üèì": "ping pong table tennis sport",
  "üè∏": "badminton sport",
  "üèí": "hockey sport ice",
  "üèë": "field hockey sport",
  "üèè": "cricket sport",
  "üèπ": "archery bow arrow sport",
  "üé£": "fishing sport hobby",
  "ü•ä": "boxing glove sport fight",
  "ü•ã": "martial arts karate judo sport",
  "üõπ": "skateboard sport",
  "‚õ∏Ô∏è": "ice skate sport winter",
  "üéø": "ski sport winter snow",
  "üèÇ": "snowboard sport winter",
  "üèãÔ∏è": "weightlifting gym sport exercise",
  "ü§∏": "gymnastics sport exercise",
  "üßò": "yoga meditation exercise",
  "üèÑ": "surfing sport water",
  "üèä": "swimming sport water",
  "üöó": "car vehicle automobile",
  "üöï": "taxi cab vehicle",
  "üöô": "suv vehicle car",
  "üöå": "bus vehicle",
  "üöé": "trolleybus vehicle",
  "üèéÔ∏è": "race car vehicle fast",
  "üöì": "police car vehicle cop",
  "üöë": "ambulance vehicle emergency",
  "üöí": "fire truck vehicle emergency",
  "üöê": "minibus vehicle van",
  "üöö": "truck vehicle delivery",
  "üöõ": "semi truck vehicle",
  "üöú": "tractor vehicle farm",
  "üèçÔ∏è": "motorcycle vehicle bike",
  "üõµ": "scooter vehicle",
  "üö≤": "bicycle bike vehicle",
  "üõ¥": "scooter kick vehicle",
  "üöÅ": "helicopter vehicle aircraft",
  "‚úàÔ∏è": "airplane aircraft vehicle plane",
  "üõ©Ô∏è": "small airplane aircraft vehicle",
  "‚õµ": "sailboat boat ship water",
  "üö§": "speedboat boat ship water fast",
  "üõ•Ô∏è": "motor boat ship water",
  "üö¢": "ship boat water cruise",
  "‚öì": "anchor ship boat water",
  "üöß": "construction warning barrier hazard",
  "üö¶": "traffic light signal",
  "üó∫Ô∏è": "map world travel",
  "üóΩ": "statue liberty new york",
  "üóº": "tokyo tower japan",
  "üè∞": "castle building fortress",
  "üèØ": "japanese castle building",
  "üé°": "ferris wheel amusement park",
  "üé¢": "roller coaster amusement park",
  "üé†": "carousel horse amusement park",
  "‚åö": "watch time clock",
  "üì±": "phone mobile smartphone",
  "üíª": "laptop computer technology work office device",
  "‚å®Ô∏è": "keyboard typing computer input device",
  "üñ•Ô∏è": "desktop computer technology work office device pc",
  "üñ®Ô∏è": "printer print document office device",
  "üñ±Ô∏è": "computer mouse click device input",
  "üíΩ": "computer disk minidisk storage data",
  "üíæ": "floppy disk save storage data old",
  "üíø": "optical disk cd storage data",
  "üìÄ": "dvd disk storage data media",
  "üìÖ": "calendar date schedule appointment meeting day planner",
  "üìÜ": "calendar date schedule appointment meeting day planner",
  "üóìÔ∏è": "calendar date schedule appointment meeting day planner",
  "üìá": "card rolodex contacts business cards",
  "üóÇÔ∏è": "card file dividers organize filing folders tabs",
  "üóÉÔ∏è": "card file box storage organize filing archive",
  "üóÑÔ∏è": "file cabinet office storage organize archive",
  "üìã": "clipboard document list checklist tasks",
  "üìä": "bar chart data graph statistics report analytics presentation",
  "üìà": "chart increasing upward growth success profit metrics analytics",
  "üìâ": "chart decreasing downward decline loss metrics analytics",
  "üíπ": "chart upward trend stock market finance profit",
  "üìÅ": "folder directory files organize documents storage",
  "üìÇ": "folder open directory files organize documents storage",
  "üìÑ": "document page paper file text",
  "üìÉ": "document page paper file text scroll",
  "üìë": "bookmark tabs document file reference report",
  "üì∞": "newspaper news article press media",
  "üóûÔ∏è": "newspaper rolled news article press media",
  "üìì": "notebook journal writing notes diary",
  "üìî": "notebook journal writing notes diary decorative",
  "üìí": "ledger account book record finance",
  "üìï": "closed book text reading red",
  "üìó": "open book text reading green",
  "üìò": "open book text reading blue",
  "üìô": "open book text reading orange",
  "üìö": "books library reading education study",
  "üìñ": "open book reading text education study",
  "üîñ": "bookmark save reference mark page",
  "üóíÔ∏è": "spiral notepad notes writing memo",
  "üìù": "memo note writing document text pencil",
  "‚úâÔ∏è": "envelope mail email letter message post",
  "üìß": "email mail message inbox electronic",
  "üì®": "incoming envelope mail email message received",
  "üì©": "envelope arrow mail email message send",
  "üì§": "outbox tray mail send email message",
  "üì•": "inbox tray mail receive email message",
  "üì¶": "package box shipping delivery parcel",
  "üì´": "mailbox closed mail post letter",
  "üì™": "mailbox closed mail post letter",
  "üì¨": "mailbox open mail post letter",
  "üì≠": "mailbox open mail post letter",
  "üìÆ": "postbox mail post letter",
  "üó≥Ô∏è": "ballot box vote election",
  "‚úèÔ∏è": "pencil write edit draw",
  "‚úíÔ∏è": "pen write edit signature",
  "üñäÔ∏è": "pen write edit signature",
  "üñãÔ∏è": "fountain pen write edit signature formal",
  "üìå": "pushpin pin notice board mark important",
  "üìç": "round pushpin pin location mark map",
  "üñáÔ∏è": "linked paperclips attach connect document",
  "üìé": "paperclip attach link document file",
  "üìê": "triangular ruler measure angle geometry math",
  "üîó": "link chain connection url hyperlink",
  "‚õìÔ∏è": "chains link connection locked",
  "üß∑": "safety pin pin attach fasten",
  "üîß": "wrench tool fix repair settings",
  "üî®": "hammer tool build fix construct",
  "‚öíÔ∏è": "hammer pick tools build mining",
  "üõ†Ô∏è": "hammer wrench tools fix repair settings",
  "‚öôÔ∏è": "gear settings configuration mechanical cog",
  "üî©": "nut bolt hardware fastener",
  "‚ö°": "high voltage lightning electricity power energy fast",
  "üîã": "battery power energy charge",
  "üîå": "electric plug power energy outlet",
  "üí°": "light bulb idea bright lamp illumination",
  "üî¶": "flashlight torch light",
  "üïØÔ∏è": "candle light flame fire",
  "ü™î": "diya lamp light",
  "üíµ": "dollar banknote money cash currency",
  "üí¥": "yen banknote money cash currency",
  "üí∂": "euro banknote money cash currency",
  "üí∑": "pound banknote money cash currency",
  "üí∞": "money bag cash wealth rich savings",
  "üí≥": "credit card payment bank finance",
  "üí∏": "money wings cash spending flying",
  "üè¶": "bank building financial money institution",
  "üìê": "triangular ruler measure angle geometry",
  "üñåÔ∏è": "paintbrush brush art creative design",
  "üñçÔ∏è": "crayon draw color art",
  "üé≠": "performing arts theater mask drama",
  "üñºÔ∏è": "framed picture art painting photo image",
  "üé®": "artist palette art paint creative design",
}

const EMOJI_CATEGORIES = {
  Smileys: [
    "üòÄ",
    "üòÉ",
    "üòÑ",
    "üòÅ",
    "üòÜ",
    "üòÖ",
    "üòÇ",
    "ü§£",
    "üòä",
    "üòá",
    "üôÇ",
    "üôÉ",
    "üòâ",
    "üòå",
    "üòç",
    "ü•∞",
    "üòò",
    "üòó",
    "üòô",
    "üòö",
    "üòã",
    "üòõ",
    "üòù",
    "üòú",
    "ü§™",
    "ü§®",
    "üßê",
    "ü§ì",
    "üòé",
    "ü§©",
    "ü•≥",
    "üòè",
    "üòí",
    "üòû",
    "üòî",
    "üòü",
    "üòï",
    "üôÅ",
    "‚òπÔ∏è",
    "üò£",
    "üòñ",
    "üò´",
    "üò©",
    "ü•∫",
    "üò¢",
    "üò≠",
    "üò§",
    "üò†",
    "üò°",
    "ü§¨",
    "ü§Ø",
    "üò≥",
    "ü•µ",
    "ü•∂",
    "üò±",
    "üò®",
    "üò∞",
    "üò•",
    "üòì",
    "ü§ó",
    "ü§î",
    "ü§≠",
    "ü§´",
    "ü§•",
    "üëÄ",
    "üëÅÔ∏è",
    "üëì",
    "üï∂Ô∏è",
    "ü•Ω",
  ],
  People: [
    "üë∂",
    "üßí",
    "üë¶",
    "üëß",
    "üßë",
    "üë±",
    "üë®",
    "üßî",
    "üë©",
    "üßì",
    "üë¥",
    "üëµ",
    "üíÉ",
    "üï∫",
    "ü§ñ",
    "üë®‚Äç‚öïÔ∏è",
    "üë©‚Äç‚öïÔ∏è",
    "üßë‚Äç‚öïÔ∏è",
    "üë®‚Äçüéì",
    "üë©‚Äçüéì",
    "üßë‚Äçüéì",
    "üë®‚Äçüè´",
    "üë©‚Äçüè´",
    "üßë‚Äçüè´",
    "üë®‚Äç‚öñÔ∏è",
    "üë©‚Äç‚öñÔ∏è",
    "üßë‚Äç‚öñÔ∏è",
    "üë®‚Äçüåæ",
    "üë©‚Äçüåæ",
    "üßë‚Äçüåæ",
    "üë®‚Äçüç≥",
    "üë©‚Äçüç≥",
    "üßë‚Äçüç≥",
    "üë®‚Äçüîß",
    "üë©‚Äçüîß",
    "üßë‚Äçüîß",
    "üë®‚Äçüè≠",
    "üë©‚Äçüè≠",
    "üßë‚Äçüè≠",
    "üë®‚Äçüíº",
    "üë©‚Äçüíº",
    "üßë‚Äçüíº",
    "üë®‚Äçüî¨",
    "üë©‚Äçüî¨",
    "üßë‚Äçüî¨",
    "üë®‚Äçüíª",
    "üë©‚Äçüíª",
    "üßë‚Äçüíª",
    "üë®‚Äçüé§",
    "üë©‚Äçüé§",
    "üßë‚Äçüé§",
    "üë®‚Äçüé®",
    "üë©‚Äçüé®",
    "üßë‚Äçüé®",
    "üë®‚Äç‚úàÔ∏è",
    "üë©‚Äç‚úàÔ∏è",
    "üßë‚Äç‚úàÔ∏è",
    "üë®‚ÄçüöÄ",
    "üë©‚ÄçüöÄ",
    "üßë‚ÄçüöÄ",
    "üë®‚Äçüöí",
    "üë©‚Äçüöí",
    "üßë‚Äçüöí",
    "üëÆ",
    "üïµÔ∏è",
    "üíÇ",
    "üë∑",
    "ü§¥",
    "üë∏",
    "üë≥",
    "üë≤",
    "üßï",
    "ü§µ",
    "üë∞",
    "ü§∞",
    "ü§±",
    "üëº",
    "üéÖ",
    "ü§∂",
    "ü¶∏",
    "ü¶π",
    "üßô",
    "üßö",
    "üßõ",
    "üßú",
    "üßù",
    "üßû",
    "üßü",
    "üíÜ",
  ],
  Animals: [
    "üê∂",
    "üê±",
    "üê≠",
    "üêπ",
    "üê∞",
    "ü¶ä",
    "üêª",
    "üêº",
    "üê®",
    "üêØ",
    "ü¶Å",
    "üêÆ",
    "üê∑",
    "üêΩ",
    "üê∏",
    "üêµ",
    "üôà",
    "üôâ",
    "üôä",
    "üêí",
    "üêî",
    "üêß",
    "üê¶",
    "üê§",
    "üê£",
    "üê•",
    "ü¶Ü",
    "ü¶Ö",
    "ü¶â",
    "ü¶á",
    "üê∫",
    "üêó",
    "üê¥",
    "ü¶Ñ",
    "üêù",
    "üêõ",
    "ü¶ã",
    "üêå",
    "üêû",
    "üêú",
    "ü¶ü",
    "ü¶ó",
    "üï∑Ô∏è",
    "ü¶Ç",
    "üê¢",
    "üêç",
    "ü¶é",
    "ü¶ñ",
  ],
  Food: [
    "üçé",
    "üçê",
    "üçä",
    "üçã",
    "üçå",
    "üçâ",
    "üçá",
    "üçì",
    "üçà",
    "üçí",
    "üçë",
    "ü•≠",
    "üçç",
    "ü••",
    "ü•ù",
    "üçÖ",
    "üçÜ",
    "ü•ë",
    "ü•¶",
    "ü•í",
    "üå∂Ô∏è",
    "üåΩ",
    "ü•ï",
    "ü•î",
    "üç†",
    "ü•ê",
    "ü•ñ",
    "üçû",
    "üßÄ",
    "ü•ö",
    "üç≥",
    "ü•û",
    "ü•ì",
    "ü•©",
    "üçó",
    "üçñ",
    "üå≠",
  ],
  Activities: [
    "‚öΩ",
    "üèÄ",
    "üèà",
    "‚öæ",
    "üéæ",
    "üèê",
    "üèâ",
    "üé±",
    "üèì",
    "üè∏",
    "üèí",
    "üèë",
    "üèè",
    "üèπ",
    "üé£",
    "ü•ä",
    "ü•ã",
    "üõπ",
    "‚õ∏Ô∏è",
    "üéø",
    "üèÇ",
    "üèãÔ∏è",
    "ü§∏",
    "üßò",
    "üèÑ",
    "üèä",
    "üé®",
    "üñåÔ∏è",
    "üñçÔ∏è",
    "üé≠",
    "üñºÔ∏è",
  ],
  Travel: [
    "üöó",
    "üöï",
    "üöô",
    "üöå",
    "üöé",
    "üèéÔ∏è",
    "üöì",
    "üöë",
    "üöí",
    "üöê",
    "üöö",
    "üöõ",
    "üöú",
    "üèçÔ∏è",
    "üõµ",
    "üö≤",
    "üõ¥",
    "üöÅ",
    "‚úàÔ∏è",
    "üõ©Ô∏è",
    "‚õµ",
    "üö§",
    "üõ•Ô∏è",
    "üö¢",
    "‚öì",
    "üöß",
    "üö¶",
    "üó∫Ô∏è",
    "üóø",
    "üóΩ",
    "üóº",
    "üè∞",
    "üèØ",
    "üé°",
    "üé¢",
    "üé†",
  ],
  Objects: [
    "‚åö",
    "üì±",
    "üíª",
    "‚å®Ô∏è",
    "üñ•Ô∏è",
    "üñ®Ô∏è",
    "üñ±Ô∏è",
    "üíΩ",
    "üíæ",
    "üíø",
    "üìÄ",
    "üìÖ",
    "üìÜ",
    "üóìÔ∏è",
    "üìá",
    "üóÇÔ∏è",
    "üóÉÔ∏è",
    "üóÑÔ∏è",
    "üìã",
    "üìä",
    "üìà",
    "üìâ",
    "üíπ",
    "üìÅ",
    "üìÇ",
    "üìÑ",
    "üìÉ",
    "üìë",
    "üì∞",
    "üóûÔ∏è",
    "üìì",
    "üìî",
    "üìí",
    "üìï",
    "üìó",
    "üìò",
    "üìô",
    "üìö",
    "üìñ",
    "üîñ",
    "üóíÔ∏è",
    "üìù",
    "‚úâÔ∏è",
    "üìß",
    "üì®",
    "üì©",
    "üì§",
    "üì•",
    "üì¶",
    "üì´",
    "üì™",
    "üì¨",
    "üì≠",
    "üìÆ",
    "üó≥Ô∏è",
    "‚úèÔ∏è",
    "‚úíÔ∏è",
    "üñäÔ∏è",
    "üñãÔ∏è",
    "üìå",
    "üìç",
    "üñáÔ∏è",
    "üìé",
    "üìè",
    "üìê",
    "‚úÇÔ∏è",
    "üóëÔ∏è",
    "üíº",
    "üìû",
    "‚òéÔ∏è",
    "üìü",
    "üì†",
    "üîß",
    "üî®",
    "‚öíÔ∏è",
    "üõ†Ô∏è",
    "‚öôÔ∏è",
    "üî©",
    "üîã",
    "üîå",
    "üí°",
    "üî¶",
    "üïØÔ∏è",
    "ü™î",
    "üíµ",
    "üí¥",
    "üí∂",
    "üí∑",
    "üí∞",
    "üí≥",
    "üí∏",
    "üè¶",
    "üéØ",
    "üé≤",
    "üßÆ",
    "üßæ",
    "üñºÔ∏è",
    "üé®",
    "üñåÔ∏è",
    "üñçÔ∏è",
    "üé≠",
    "üì∑",
    "üì∏",
    "üìπ",
    "üé•",
    "üì∫",
    "üìª",
    "üéôÔ∏è",
    "üé§",
    "üéß",
    "‚è∞",
    "‚åõ",
    "‚è≥",
    "üóø",
  ],
}

export function EmojiPicker({ value, onChange, inline = false }: EmojiPickerProps) {
  const [searchTerm, setSearchTerm] = useState("")
  const [activeTab, setActiveTab] = useState("Smileys")
  const [open, setOpen] = useState(false)

  const allEmojis = Object.values(EMOJI_CATEGORIES).flat()

  const filteredEmojis = searchTerm
    ? allEmojis.filter((emoji) => {
        const searchLower = searchTerm.toLowerCase()
        const emojiName = EMOJI_NAMES[emoji] || ""
        return emoji.includes(searchTerm) || emojiName.toLowerCase().includes(searchLower)
      })
    : EMOJI_CATEGORIES[activeTab as keyof typeof EMOJI_CATEGORIES] || []

  const handleEmojiSelect = (emoji: string) => {
    onChange(emoji)
    setOpen(false)
  }

  if (inline) {
    return (
      <div className="space-y-2 w-full">
        <div className="flex items-center gap-2">
          <Button variant="ghost" size="sm" className="w-10 h-10 p-0 text-xl cursor-pointer hover:bg-muted border">
            {value || "üòÄ"}
          </Button>
          <div className="grid grid-cols-6 gap-1 flex-1">
            {EMOJI_CATEGORIES.Smileys.slice(0, 6).map((emoji) => (
              <Button
                key={emoji}
                variant="ghost"
                size="sm"
                className="w-8 h-8 p-0 text-lg hover:bg-muted cursor-pointer"
                onClick={() => handleEmojiSelect(emoji)}
              >
                {emoji}
              </Button>
            ))}
          </div>
        </div>
        <div className="grid grid-cols-8 gap-1">
          {EMOJI_CATEGORIES.Objects.slice(0, 16).map((emoji) => (
            <Button
              key={emoji}
              variant="ghost"
              size="sm"
              className="w-8 h-8 p-0 text-lg hover:bg-muted cursor-pointer"
              onClick={() => handleEmojiSelect(emoji)}
            >
              {emoji}
            </Button>
          ))}
        </div>
      </div>
    )
  }

  return (
    <Popover open={open} onOpenChange={setOpen}>
      <PopoverTrigger className="w-8 h-8 p-0 text-lg cursor-pointer hover:bg-muted inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground">
        {value || "üòÄ"}
      </PopoverTrigger>
      <PopoverContent
        className="w-96 p-3 z-50"
        side="bottom"
        align="start"
        sideOffset={8}
        collisionPadding={10}
        avoidCollisions={true}
        sticky="always"
        onCloseAutoFocus={(e) => e.preventDefault()}
      >
        <div className="space-y-3">
          <div className="relative">
            <Search className="w-4 h-4 absolute left-2 top-1/2 transform -translate-y-1/2 text-muted-foreground" />
            <Input
              placeholder="Search emojis..."
              className="pl-8 h-8"
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>

          {!searchTerm ? (
            <Tabs value={activeTab} onValueChange={setActiveTab}>
              <TabsList className="grid w-full grid-cols-4">
                <TabsTrigger value="Smileys" className="text-xs cursor-pointer">
                  üòÄ
                </TabsTrigger>
                <TabsTrigger value="People" className="text-xs cursor-pointer">
                  üë§
                </TabsTrigger>
                <TabsTrigger value="Animals" className="text-xs cursor-pointer">
                  üê∂
                </TabsTrigger>
                <TabsTrigger value="Food" className="text-xs cursor-pointer">
                  üçé
                </TabsTrigger>
              </TabsList>
              <TabsList className="grid w-full grid-cols-4 mt-1">
                <TabsTrigger value="Activities" className="text-xs cursor-pointer">
                  ‚öΩ
                </TabsTrigger>
                <TabsTrigger value="Travel" className="text-xs cursor-pointer">
                  üöó
                </TabsTrigger>
                <TabsTrigger value="Objects" className="text-xs cursor-pointer">
                  üíª
                </TabsTrigger>
                <TabsTrigger value="Symbols" className="text-xs cursor-pointer">
                  ‚ù§Ô∏è
                </TabsTrigger>
              </TabsList>

              {Object.entries(EMOJI_CATEGORIES).map(([category, emojis]) => (
                <TabsContent key={category} value={category} className="mt-2">
                  <div className="grid grid-cols-8 gap-1 max-h-48 overflow-y-auto">
                    {emojis.map((emoji) => (
                      <Button
                        key={emoji}
                        variant="ghost"
                        size="sm"
                        className="w-8 h-8 p-0 text-lg hover:bg-muted cursor-pointer"
                        onClick={() => handleEmojiSelect(emoji)}
                      >
                        {emoji}
                      </Button>
                    ))}
                  </div>
                </TabsContent>
              ))}
            </Tabs>
          ) : (
            <div className="grid grid-cols-8 gap-1 max-h-48 overflow-y-auto">
              {filteredEmojis.length > 0 ? (
                filteredEmojis.map((emoji) => (
                  <Button
                    key={emoji}
                    variant="ghost"
                    size="sm"
                    className="w-8 h-8 p-0 text-lg hover:bg-muted cursor-pointer"
                    onClick={() => handleEmojiSelect(emoji)}
                  >
                    {emoji}
                  </Button>
                ))
              ) : (
                <div className="col-span-8 text-center text-sm text-muted-foreground py-4">No emojis found</div>
              )}
            </div>
          )}
        </div>
      </PopoverContent>
    </Popover>
  )
}
